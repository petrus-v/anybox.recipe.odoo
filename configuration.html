
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configuration reference &mdash; Odoo buildout recipe 1.9.2.dev0 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.3.4/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/united.anybox.bootswatch.bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/anybox.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.9.2.dev0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Odoo buildout recipe 1.9.2.dev0 documentation" href="index.html" />
    <link rel="next" title="Odoo Scripts" href="scripts.html" />
    <link rel="prev" title="First steps" href="first_steps.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><img src="_static/logo.png">
          Odoo buildout recipe</a>
        <span class="navbar-text navbar-version pull-left"><b>1.9</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="index.html">Home</a></li>
                <li><a href="http://anybox.fr">Anybox</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="first_steps.html">First steps</a><ul>
<li class="toctree-l2"><a class="reference internal" href="first_steps.html#how-to-create-and-bootstrap-a-buildout">How to create and bootstrap a buildout</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_steps.html#example-openerp-7-0-buildouts">Example OpenERP 7.0 buildouts</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_steps.html#example-openerp-6-1-buildout-with-a-custom-addon">Example OpenERP 6.1 buildout with a custom addon</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_steps.html#example-openerp-6-0-buildout-server-and-clients">Example OpenERP 6.0 buildout (server and clients)</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_steps.html#continuously-tested-examples">Continuously tested examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_steps.html#other-sample-buildouts">Other sample buildouts</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Configuration reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-buildout-configuration-file-and-parts">The buildout configuration file and parts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#odoo-recipes">Odoo recipes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#options-for-assembly-and-source-management">Options for assembly and source management</a></li>
<li class="toctree-l2"><a class="reference internal" href="#odoo-options">Odoo options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#options-for-executables-generation-and-serving">Options for executables generation and serving</a></li>
<li class="toctree-l2"><a class="reference internal" href="#options-for-development-qa-and-introspection">Options for development, QA and introspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#options-for-download-and-caching-strategies">Options for download and caching strategies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#options-for-release-and-packaging">Options for release and packaging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Odoo Scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="scripts.html#use-cases">Use cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripts.html#declaring-odoo-scripts">Declaring Odoo Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripts.html#interactive-consoles">Interactive Consoles</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripts.html#writing-odoo-scripts">Writing Odoo Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripts.html#upgrade-scripts">Upgrade scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripts.html#startup-scripts">Startup scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripts.html#list-of-internal-entry-points">List of internal entry points</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dev_prod_workflow.html">Full development to production example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dev_prod_workflow.html#common-setup">Common setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_prod_workflow.html#developer-s-setup">Developer&#8217;s setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_prod_workflow.html#release-and-packaging">Release and packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_prod_workflow.html#deployment-with-a-server-local-configuration-file">Deployment with a server-local configuration file</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">For contributors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#source-and-tracking">Source and tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#using-a-development-version">Using a development version</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#development-setup">Development setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#building-documentation">Building documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#coding-style">Coding style</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#launching-static-analysis-and-unit-tests">Launching static analysis and unit tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#integration-tests">Integration tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#continuous-integration">Continuous integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="devnotes/index.html">Development notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="devnotes/git-sparse-shallow.html">Git shallow clones and selective branch fetching</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="apidoc/anybox.recipe.odoo.html">anybox.recipe.odoo Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.html#id1"><code class="docutils literal"><span class="pre">anybox.recipe.odoo</span></code> Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.html#module-anybox.recipe.odoo.base"><code class="docutils literal"><span class="pre">base</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.html#module-anybox.recipe.odoo.devtools"><code class="docutils literal"><span class="pre">devtools</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.html#module-anybox.recipe.odoo.server"><code class="docutils literal"><span class="pre">server</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.html#module-anybox.recipe.odoo.testing"><code class="docutils literal"><span class="pre">testing</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.html#module-anybox.recipe.odoo.utils"><code class="docutils literal"><span class="pre">utils</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.html#subpackages">Subpackages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="apidoc/anybox.recipe.odoo.runtime.html">runtime Subpackage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.runtime.html#module-anybox.recipe.odoo.runtime"><code class="docutils literal"><span class="pre">runtime</span></code> Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.runtime.html#module-anybox.recipe.odoo.runtime.session"><code class="docutils literal"><span class="pre">session</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.runtime.html#module-anybox.recipe.odoo.runtime.upgrade"><code class="docutils literal"><span class="pre">upgrade</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.runtime.html#module-anybox.recipe.odoo.runtime.start_openerp"><code class="docutils literal"><span class="pre">start_openerp</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.runtime.html#module-anybox.recipe.odoo.runtime.test_openerp"><code class="docutils literal"><span class="pre">test_openerp</span></code> Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="apidoc/anybox.recipe.odoo.vcs.html">vcs Subpackage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.vcs.html#module-anybox.recipe.odoo.vcs"><code class="docutils literal"><span class="pre">vcs</span></code> Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.vcs.html#module-anybox.recipe.odoo.vcs.base"><code class="docutils literal"><span class="pre">base</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.vcs.html#module-anybox.recipe.odoo.vcs.bzr"><code class="docutils literal"><span class="pre">bzr</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.vcs.html#module-anybox.recipe.odoo.vcs.git"><code class="docutils literal"><span class="pre">git</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.vcs.html#module-anybox.recipe.odoo.vcs.hg"><code class="docutils literal"><span class="pre">hg</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.vcs.html#module-anybox.recipe.odoo.vcs.svn"><code class="docutils literal"><span class="pre">svn</span></code> Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="apidoc/anybox.recipe.odoo.vcs.html#module-anybox.recipe.odoo.vcs.testing"><code class="docutils literal"><span class="pre">testing</span></code> Module</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Configuration reference</a><ul>
<li><a class="reference internal" href="#the-buildout-configuration-file-and-parts">The buildout configuration file and parts</a><ul>
<li><a class="reference internal" href="#command-line">Command line</a></li>
<li><a class="reference internal" href="#inheritance">Inheritance</a></li>
<li><a class="reference internal" href="#default-configuration">Default configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#odoo-recipes">Odoo recipes</a><ul>
<li><a class="reference internal" href="#server">Server</a></li>
<li><a class="reference internal" href="#web-client">Web client</a></li>
<li><a class="reference internal" href="#gtk-client">GTK client</a></li>
</ul>
</li>
<li><a class="reference internal" href="#options-for-assembly-and-source-management">Options for assembly and source management</a><ul>
<li><a class="reference internal" href="#version">version</a></li>
<li><a class="reference internal" href="#addons">addons</a><ul>
<li><a class="reference internal" href="#the-group-addons-option">The <code class="docutils literal"><span class="pre">group</span></code> addons option</a></li>
<li><a class="reference internal" href="#the-subdir-addons-option">The <code class="docutils literal"><span class="pre">subdir</span></code> addons option</a></li>
<li><a class="reference internal" href="#the-bzr-init-addons-option">The <code class="docutils literal"><span class="pre">bzr-init</span></code> addons option</a></li>
<li><a class="reference internal" href="#the-depth-git-option">The <code class="docutils literal"><span class="pre">depth</span></code> Git option</a></li>
<li><a class="reference internal" href="#git-sha-pinning-and-the-branch-option">Git SHA pinning and the <code class="docutils literal"><span class="pre">branch</span></code> option</a></li>
</ul>
</li>
<li><a class="reference internal" href="#merges">merges</a></li>
<li><a class="reference internal" href="#eggs">eggs</a></li>
<li><a class="reference internal" href="#apply-requirements-file">apply-requirements-file</a><ul>
<li><a class="reference internal" href="#precedence-among-requirements">Precedence among requirements</a></li>
<li><a class="reference internal" href="#requirements-file-limitations">Requirements file limitations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#revisions">revisions</a></li>
<li><a class="reference internal" href="#clean">clean</a></li>
<li><a class="reference internal" href="#vcs-revert">vcs-revert</a></li>
<li><a class="reference internal" href="#vcs-clear-retry">vcs-clear-retry</a></li>
<li><a class="reference internal" href="#vcs-clear-locks">vcs-clear-locks</a></li>
<li><a class="reference internal" href="#id8">git-depth</a></li>
</ul>
</li>
<li><a class="reference internal" href="#odoo-options">Odoo options</a></li>
<li><a class="reference internal" href="#options-for-executables-generation-and-serving">Options for executables generation and serving</a><ul>
<li><a class="reference internal" href="#script-name">script_name</a></li>
<li><a class="reference internal" href="#gevent-script-name">gevent_script_name</a></li>
<li><a class="reference internal" href="#openerp-scripts">openerp_scripts</a></li>
<li><a class="reference internal" href="#upgrade-script-name">upgrade_script_name</a></li>
<li><a class="reference internal" href="#upgrade-script">upgrade_script</a></li>
<li><a class="reference internal" href="#gunicorn">gunicorn</a><ul>
<li><a class="reference internal" href="#proxied-mode">Proxied mode</a></li>
<li><a class="reference internal" href="#gunicorn-options">Gunicorn options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#server-wide-modules">server_wide_modules</a></li>
<li><a class="reference internal" href="#openerp-command-name">openerp_command_name</a></li>
<li><a class="reference internal" href="#scripts">scripts</a></li>
<li><a class="reference internal" href="#startup-delay">startup_delay</a></li>
</ul>
</li>
<li><a class="reference internal" href="#options-for-development-qa-and-introspection">Options for development, QA and introspection</a><ul>
<li><a class="reference internal" href="#with-devtools">with_devtools</a></li>
<li><a class="reference internal" href="#test-script-name">test_script_name</a></li>
<li><a class="reference internal" href="#interpreter-name">interpreter_name</a></li>
<li><a class="reference internal" href="#interpreter">interpreter</a></li>
</ul>
</li>
<li><a class="reference internal" href="#options-for-download-and-caching-strategies">Options for download and caching strategies</a><ul>
<li><a class="reference internal" href="#base-url">base_url</a></li>
<li><a class="reference internal" href="#openerp-downloads-directory">openerp-downloads-directory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#options-for-release-and-packaging">Options for release and packaging</a><ul>
<li><a class="reference internal" href="#freeze-to">freeze-to</a></li>
<li><a class="reference internal" href="#freeze-allow-picked-versions">freeze-allow-picked-versions</a></li>
<li><a class="reference internal" href="#extract-downloads-to">extract-downloads-to</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="first_steps.html" title="Previous Chapter: First steps"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; First steps</span>
    </a>
  </li>
  <li>
    <a href="scripts.html" title="Next Chapter: Odoo Scripts"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Odoo Scripts &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/configuration.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="configuration-reference">
<h1>Configuration reference<a class="headerlink" href="#configuration-reference" title="Permalink to this headline">¶</a></h1>
<p>This is a <a class="reference external" href="https://github.com/buildout/buildout">Buildout</a> recipe that can
download, install and configure one or several Odoo servers, web clients,
gtk clients and addons modules, from official or custom sources, or any bzr,
hg, git or svn repositories.  It currently supports versions 6.0, 6.1 and 7.0,
with gunicorn deployment and an additional cron worker. It works under Linux
and MacOs. It might work under Windows but it is untested.</p>
<p>A &#8220;Buildout recipe&#8221; is the engine behind a Buildout &#8220;part&#8221;. A &#8220;buildout part&#8221;
is a part of a larger application built with the Buildout sandbox build system.
Using Buildout is harmless for your system because it is entirely
self-contained in a single directory: just delete the directory and the
buildout is gone. You never have to use administrative rights, except for
build dependencies.</p>
<div class="section" id="the-buildout-configuration-file-and-parts">
<span id="buildout-conf-parts"></span><h2>The buildout configuration file and parts<a class="headerlink" href="#the-buildout-configuration-file-and-parts" title="Permalink to this headline">¶</a></h2>
<p>The intents of this section is to highlights a few facts that we&#8217;ve
found especially useful. People should refer to the
<a class="reference external" href="https://pypi.python.org/pypi/zc.buildout/2.2.1">reference zc.buildout documentation</a>
and in particular to the <a class="reference external" href="https://pypi.python.org/pypi/zc.buildout/2.2.1#configuration-file-syntax">configuration file syntax</a>
(these links may have to be adapted for the version in use).</p>
<p>Buildout configuration files are written almost in INI format, and
always start with a <code class="docutils literal"><span class="pre">buildout</span></code> section:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">buildout</span><span class="p">]</span>
<span class="n">parts</span> <span class="o">=</span> <span class="n">openerp</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">parts</span></code> option specifies which parts to install by default if
one runs <code class="docutils literal"><span class="pre">bin/buildout</span></code> with no explicit <code class="docutils literal"><span class="pre">install</span></code> directive.</p>
<p>Parts directly correspond to sections of the configuration file, and
must specify the recipe that&#8217;s to be used:</p>
<div class="highlight-python"><div class="highlight"><pre>[openerp]
recipe = anybox.recipe.openerp:server
</pre></div>
</div>
<p>An extra dependency of the recipe gets required at runtime like this:</p>
<div class="highlight-python"><div class="highlight"><pre>recipe = anybox.recipe.openerp[bzr]:server
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>inline comments</p>
<p>As of version 1.9 of the recipe, inline comments starting
with a semicolon <em>not at the beginning of a line</em> are
supported in the recipe&#8217;s specific options, and especially
in the multi line ones, whereas <code class="docutils literal"><span class="pre">zc.buildout</span></code> does not
support them.</p>
<p class="last">For more detail, check
<code class="xref py py-func docutils literal"><span class="pre">anybox.recipe.openerp.utils.option_splitlines()</span></code>.</p>
</div>
<div class="section" id="command-line">
<h3>Command line<a class="headerlink" href="#command-line" title="Permalink to this headline">¶</a></h3>
<p>The configuration file can be specified from the command line:</p>
<div class="highlight-python"><div class="highlight"><pre>bin/buildout -c buildout.local.cfg
</pre></div>
</div>
<p>Recipe options can be overridden from the command-line:</p>
<div class="highlight-python"><div class="highlight"><pre>bin/buildout -c buildout.local.cfg openerp:clean=True openerp:xmlrpc_port=8169
</pre></div>
</div>
<p>Parts that are not listed in the <code class="docutils literal"><span class="pre">buildout</span></code> configuration section
can be explicitely installed:</p>
<div class="highlight-python"><div class="highlight"><pre>bin/buildout install openerp funkload static-analysis
</pre></div>
</div>
</div>
<div class="section" id="inheritance">
<span id="extends"></span><h3>Inheritance<a class="headerlink" href="#inheritance" title="Permalink to this headline">¶</a></h3>
<p>A buildout configuration file can reference another one and change
some options (note the <code class="docutils literal"><span class="pre">+=</span></code> notation that&#8217;s not part of the INI format):</p>
<div class="highlight-python"><div class="highlight"><pre>[buildout]
extends = buildout.base.cfg

[openerp]
eggs += nose
        coverage
with_devtools = True
</pre></div>
</div>
<p>These extensions can be chained. This allows in particular project maintainers
to separate the configuration options that are considered to be part
of the project from those that depend on the server environment
(ports, database hosts…)</p>
</div>
<div class="section" id="default-configuration">
<h3>Default configuration<a class="headerlink" href="#default-configuration" title="Permalink to this headline">¶</a></h3>
<p>If available, the settings from <code class="docutils literal"><span class="pre">$HOME/.buildout/default.cfg</span></code> always
apply, as if it where the default value of the <a class="reference internal" href="#extends"><span>extends</span></a> option.</p>
<p>This is commonly used with the <code class="docutils literal"><span class="pre">eggs-directory</span></code> and
<a class="reference internal" href="#openerp-downloads-directory"><span>openerp-downloads-directory</span></a> options, because these amount to create a
user-level cache.</p>
<p>Finally, you may also use <a class="reference internal" href="#extends"><span>extends</span></a> in <code class="docutils literal"><span class="pre">default.cfg</span></code> to point
to a system-wide configuration file (useful to enforce
policies at the organization or physical site level, such as local
index servers, mirrors, etc.).</p>
</div>
</div>
<div class="section" id="odoo-recipes">
<h2>Odoo recipes<a class="headerlink" href="#odoo-recipes" title="Permalink to this headline">¶</a></h2>
<p>There are three different recipes bundled with
<code class="docutils literal"><span class="pre">anybox.recipe.openerp</span></code>. The option line to put in your part (see
<a class="reference internal" href="#buildout-conf-parts"><span>The buildout configuration file and parts</span></a>) is the following.</p>
<div class="section" id="server">
<h3>Server<a class="headerlink" href="#server" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>recipe = anybox.recipe.openerp:server
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you plan on using Launchpad&#8217;s short Bazaar branch notation
(<code class="docutils literal"><span class="pre">lp:</span></code>), then you need to add the <code class="docutils literal"><span class="pre">bzr</span></code> extra-dependency:</p>
<div class="last highlight-python"><div class="highlight"><pre>recipe = anybox.recipe.openerp[bzr]:server
</pre></div>
</div>
</div>
</div>
<div class="section" id="web-client">
<h3>Web client<a class="headerlink" href="#web-client" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>recipe = anybox.recipe.openerp:webclient
</pre></div>
</div>
</div>
<div class="section" id="gtk-client">
<h3>GTK client<a class="headerlink" href="#gtk-client" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>recipe = anybox.recipe.openerp:gtkclient
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">from OpenERP 7.0 onwards, the web and gtk clients aren&#8217;t
that useful anymore.</p>
</div>
</div>
</div>
<div class="section" id="options-for-assembly-and-source-management">
<h2>Options for assembly and source management<a class="headerlink" href="#options-for-assembly-and-source-management" title="Permalink to this headline">¶</a></h2>
<div class="section" id="version">
<span id="id1"></span><h3>version<a class="headerlink" href="#version" title="Permalink to this headline">¶</a></h3>
<p>Specifies the Odoo version to use. It can be:</p>
<ul>
<li><p class="first">The <strong>version number</strong> of an official Odoo (server, web client or gtk client):</p>
<div class="highlight-python"><div class="highlight"><pre>version = 6.0.3
</pre></div>
</div>
</li>
<li><p class="first">A <strong>custom download</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre>version = url http://example.com/openerp.tar.gz
</pre></div>
</div>
</li>
<li><p class="first">An absolute or a relative <strong>path</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">version</span> <span class="o">=</span> <span class="n">path</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">a</span><span class="o">/</span><span class="n">custom</span><span class="o">/</span><span class="n">openerp</span>
</pre></div>
</div>
</li>
<li><p class="first">A custom <strong>bzr, hg, git or svn</strong> branch or repository. The syntax is the same
as with the <a class="reference internal" href="#addons"><span>addons</span></a> option:</p>
<div class="highlight-python"><div class="highlight"><pre>recipe = anybox.recipe.openerp[bzr]:server
version = bzr lp:openobject-server/6.1 openerp61 last:1
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the <code class="docutils literal"><span class="pre">[bzr]</span></code> extra dependency declaration is useful for
resolution of the <code class="docutils literal"><span class="pre">lp:</span></code> address shortcuts.</p>
</div>
</li>
<li><p class="first">A <strong>nightly</strong> build:</p>
<div class="highlight-python"><div class="highlight"><pre>version = nightly 6.1 20120814-233345
</pre></div>
</div>
</li>
<li><p class="first">or (dangerously unpinned version):</p>
<div class="highlight-python"><div class="highlight"><pre>version = nightly 6.1 latest
</pre></div>
</div>
</li>
<li><p class="first">or even more dangerous:</p>
<div class="highlight-python"><div class="highlight"><pre>version = nightly trunk latest
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="addons">
<span id="id2"></span><h3>addons<a class="headerlink" href="#addons" title="Permalink to this headline">¶</a></h3>
<p>Specifies additional Odoo addons, either a local path or a remote
repository.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>recipe = anybox.recipe.openerp[bzr]:server
addons = local ../some/relative/path/for/custom_addons/
         local /some/other/absolute/path/for/custom_addons
         bzr lp:openobject-addons/trunk/    addons0 last:1
         hg  http://example.com/some_addons addons1 default
         git http://example.com/some_addons addons2 master
         svn http://example.com/some_addons addons3 head
         bzr lp:openerp-web/trunk/ openerp-web last:1 subdir=addons
</pre></div>
</div>
<p>Remote repositories can either contain addons subdirectories, or
be a single addon. In that latter case, called a <em>standalone
addon</em>, the <a class="reference internal" href="#option-group"><span>group option</span></a> must be used to place
the addon in an intermediate subdirectory, to match the structure expected by
Odoo.</p>
<p>Standalone addons are not supported in the local case (the
directory is considered under full responsibility of the user).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the <code class="docutils literal"><span class="pre">[bzr]</span></code> extra-dependency declaration as showcased
above in the <code class="docutils literal"><span class="pre">recipe</span></code> line is necessary for
resolution of <code class="docutils literal"><span class="pre">lp:</span></code> launchpad address shortcuts.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Never name one of these addons directory simply <code class="docutils literal"><span class="pre">addons</span></code>. It
leads to obscure and blocking install errors for addons in other
directories, claiming that some files don&#8217;t exist while they do.</p>
</div>
<p>For remote repositories, the syntax is:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">TYPE</span>&nbsp; <span class="pre">URL</span>&nbsp; <span class="pre">DESTINATION</span>&nbsp; <span class="pre">REVISION</span>&nbsp; <span class="pre">[OPTIONS]</span></code></div></blockquote>
<p>with the following semantics:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">TYPE:</th><td class="field-body">one of <code class="docutils literal"><span class="pre">bzr</span></code>, <code class="docutils literal"><span class="pre">hg</span></code>, <code class="docutils literal"><span class="pre">git</span></code> or <code class="docutils literal"><span class="pre">svn</span></code></td>
</tr>
<tr class="field-even field"><th class="field-name">URL:</th><td class="field-body">is any URL scheme supported by the versionning tool</td>
</tr>
<tr class="field-odd field"><th class="field-name">DESTINATION:</th><td class="field-body">is the local directory that will be created (relative or absolute)</td>
</tr>
<tr class="field-even field"><th class="field-name">REVISION:</th><td class="field-body">is any version specification supported (revision, tag, etc.)</td>
</tr>
<tr class="field-odd field"><th class="field-name">OPTIONS:</th><td class="field-body">each one takes the form <code class="docutils literal"><span class="pre">name=value</span></code>. No whitespace is
allowed inside an option, and no escaping is
implemented.</td>
</tr>
</tbody>
</table>
<p>Repositories are updated on each build according to the specified
revision. You must be careful with the revision specification.</p>
<p>Buildout offline mode is supported. In that case, update to the
specified revision is performed, if the VCS allows it (Subversion does
not).</p>
<div class="section" id="the-group-addons-option">
<span id="option-group"></span><h4>The <code class="docutils literal"><span class="pre">group</span></code> addons option<a class="headerlink" href="#the-group-addons-option" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">new in version 1.9.0</p>
</div>
<p>The purpose of this option is to accomodate <em>standalone
addons</em>. Indeed, Odoo expects its configuration to refer to
directory that contain addons, but some people might prefer to version
their addons in separate VCS repositories.</p>
<p>The <code class="docutils literal"><span class="pre">group</span></code> option allows to specify an intermediate directory into
which the standalone addon should actually be set:</p>
<div class="highlight-python"><div class="highlight"><pre>git http://example.com/some_addons some/target_dir group=some_group
</pre></div>
</div>
<p>The addon will end up in <code class="docutils literal"><span class="pre">some/some_group/target_dir</span></code> and
<code class="docutils literal"><span class="pre">some/some_group</span></code> will be the directory registered to Odoo</p>
<p>Even if you have only standalone addon to register, you must do it
with the <code class="docutils literal"><span class="pre">group</span></code> option.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">up to 1.8 versions, the recipe used to
create an intermediate directory silently for standalone
addons, this is not supported any more</p>
</div>
</div>
<div class="section" id="the-subdir-addons-option">
<h4>The <code class="docutils literal"><span class="pre">subdir</span></code> addons option<a class="headerlink" href="#the-subdir-addons-option" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">subdir</span></code> option, if used, makes the recipe use the given
subdirectory of the repository as the addons directory.
A very common example is the line for standard web addons from bzr:</p>
<div class="highlight-python"><div class="highlight"><pre>bzr lp:openerp-web/7.0 openerp-web last:1 subdir=addons
</pre></div>
</div>
</div>
<div class="section" id="the-bzr-init-addons-option">
<h4>The <code class="docutils literal"><span class="pre">bzr-init</span></code> addons option<a class="headerlink" href="#the-bzr-init-addons-option" title="Permalink to this headline">¶</a></h4>
<p><strong>&#8216;bzr-init&#8217;</strong> defines the way the bzr branch
is initialized for addons or server declared with a bzr
repository path.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">new in version 1.7.0</p>
</div>
<p>Possible values:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">branch (default):</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Working copy initialized with the command
<code class="docutils literal"><span class="pre">bzr</span> <span class="pre">branch</span> <span class="pre">url</span> <span class="pre">...</span></code></td>
</tr>
<tr class="field-even field"><th class="field-name">stacked-branch:</th><td class="field-body">Working copy initialized with the command
<code class="docutils literal"><span class="pre">bzr</span> <span class="pre">branch</span> <span class="pre">--stacked</span> <span class="pre">url</span> <span class="pre">...</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">lightweight-checkout:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">Working copy initialized with the command
<code class="docutils literal"><span class="pre">bzr</span> <span class="pre">checkout</span> <span class="pre">--lightweight</span> <span class="pre">url</span> <span class="pre">...</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="the-depth-git-option">
<span id="git-depth"></span><h4>The <code class="docutils literal"><span class="pre">depth</span></code> Git option<a class="headerlink" href="#the-depth-git-option" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">new in vertion 1.9.0</p>
</div>
<p><strong>depth</strong> is a per-repository configurable option to create and
maintain Git shallow clones. It allows to specify the maximum history
one wishes to keep in the local repository, hence minimizing the disk
space needed and initial cloning time.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>version = git http://github.com/odoo/odoo.git odoo 8.0 depth=1
</pre></div>
</div>
<p>You may also use this option to override the global <code class="docutils literal"><span class="pre">git-depth</span></code>
option, and in particular cancel it by specifying <code class="docutils literal"><span class="pre">None</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>version = git http://github.com/odoo/odoo.git odoo 8.0 depth=None
</pre></div>
</div>
<p>Currently, adding this option to an existing repository does not
reduce the disk footprint immediately.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">the <code class="docutils literal"><span class="pre">depth</span></code> option is abrasive, and should be avoided
on developper setups: you may lose unpushed commits.
It is, however, a good fit for automated build or
deployment systems on which the history does not usually
matter.</p>
</div>
</div>
<div class="section" id="git-sha-pinning-and-the-branch-option">
<span id="git-sha-branch"></span><h4>Git SHA pinning and the <code class="docutils literal"><span class="pre">branch</span></code> option<a class="headerlink" href="#git-sha-pinning-and-the-branch-option" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">branch</span></code> option is used to specify a branch <em>indication</em> to help
retrieving remote commits that can&#8217;t be fetched directly.</p>
<p>In Git, a commit can never be fetched by its SHA, but the recipe
supports is nevertheless, so that version pinning can be achieved
without enough authority to add tags in remote.</p>
<p>To do so, the recipe must perform first a broader fetch, then hope the
wished commit has become available locally. The <code class="docutils literal"><span class="pre">branch</span></code> option
narrows said fetch for better efficiency and reliability.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the <code class="docutils literal"><span class="pre">branch</span></code> option is new in vertion 1.9.1</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">non tagged commits can become unreachable, especially
if the remote repository gets lots of rebasing. If
possible, pinning on tags is always to be preferred.</p>
</div>
</div>
</div>
<div class="section" id="merges">
<span id="id3"></span><h3>merges<a class="headerlink" href="#merges" title="Permalink to this headline">¶</a></h3>
<p>Specify which VCS branches need to be merged into repositories
specified under <a class="reference internal" href="#addons"><span>addons</span></a> or <a class="reference internal" href="#version"><span>version</span></a>. The syntax is
the same as for repositories specified under these directives.</p>
<p>Currently only merges on bzr and git repositories are supported
(requires git 1.8)</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">new in version 1.9.0</p>
</div>
</div>
<div class="section" id="eggs">
<span id="id4"></span><h3>eggs<a class="headerlink" href="#eggs" title="Permalink to this headline">¶</a></h3>
<p>This option behaves like the identically named one of the most common
<a class="reference external" href="https://pypi.python.org/pypi/zc.recipe.egg">zc.recipe.egg</a>.</p>
<p>Starting from version 0.16 of the recipe, you don&#8217;t need to put anything in
this option by default: the recipe is supposed to add all needed
dependencies for Odoo by itself, but you have to specify additional
eggs needed by addons, or just useful ones:</p>
<div class="highlight-python"><div class="highlight"><pre>eggs = ipython
       python-ldap
       openobject-library
</pre></div>
</div>
</div>
<div class="section" id="apply-requirements-file">
<span id="id5"></span><h3>apply-requirements-file<a class="headerlink" href="#apply-requirements-file" title="Permalink to this headline">¶</a></h3>
<p>Default value: <code class="docutils literal"><span class="pre">False</span></code></p>
<p>If set to <code class="docutils literal"><span class="pre">True</span></code>, this boolean option makes the recipe read Odoo&#8217;s
<code class="docutils literal"><span class="pre">requirements.txt</span></code> file if available, and apply its prescriptions.</p>
<div class="section" id="precedence-among-requirements">
<h4>Precedence among requirements<a class="headerlink" href="#precedence-among-requirements" title="Permalink to this headline">¶</a></h4>
<p>In short, Odoo&#8217;s requirement file has the lowest precedence of all
systems that can manage versions of Python libraries within the recipe context:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">zc.buildout</span></code> comes with its own native way of expressing wished
Python versions, with a dedicated configuration section, which is by default
<code class="docutils literal"><span class="pre">[versions]</span></code>. This native system has precedence over the contents of
Odoo&#8217;s requirement file.</li>
<li>all kinds of <code class="docutils literal"><span class="pre">develop</span></code> directives have precedence over Odoo&#8217;s
requirement file. This includes the <code class="docutils literal"><span class="pre">vcs-extend-develop</span></code> of the
<code class="docutils literal"><span class="pre">gp.vcsdevelop</span></code> extension.</li>
</ul>
</div>
<div class="section" id="requirements-file-limitations">
<h4>Requirements file limitations<a class="headerlink" href="#requirements-file-limitations" title="Permalink to this headline">¶</a></h4>
<p>In case the requirements file you use is not properly supported, we
suggest as a workaround to you convert it temporarily to
<code class="docutils literal"><span class="pre">[versions]</span></code> statements, and get in touch with the recipe&#8217;s
developers.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>At the time of this writing, the <code class="docutils literal"><span class="pre">requirements.txt</span></code> file shipping
within Odoo&#8217;s main 8.0 branch is fully supported, but :</p>
<ul class="last simple">
<li>you are free to use any alternative branch, including your
own baked</li>
<li>the mainline requirements file may change in the future.</li>
</ul>
</div>
<p>Only a small subset of the <a class="reference external" href="https://pip.pypa.io/en/latest/reference/pip_install.html#requirement-specifiers">pip&#8217;s requirement specifiers</a>
is actually supported, notably:</p>
<ul class="simple">
<li>version inequalities, such as <code class="docutils literal"><span class="pre">&gt;=2.0</span></code> and boolean expressions are
not currently implemented. They will be if needed, and you should
get an understandable message about the condition being &#8220;too complicated&#8221;</li>
<li>no specifier involving network operations is supported. In
particular, the VCS URLs are not (to workaround that, use
<code class="docutils literal"><span class="pre">gp.vcsdevelop</span></code>), and the <code class="docutils literal"><span class="pre">-r</span></code> (<code class="docutils literal"><span class="pre">--requirements</span></code>) specifiers
work for local files only (path relative to the Odoo part directory).</li>
</ul>
</div>
</div>
<div class="section" id="revisions">
<span id="id6"></span><h3>revisions<a class="headerlink" href="#revisions" title="Permalink to this headline">¶</a></h3>
<p>This option allows to further precise what has been specified through
the  <a class="reference internal" href="#addons"><span>addons</span></a> and <a class="reference internal" href="#version"><span>version</span></a> options by fixing VCS revisions.</p>
<p>The main use-case it to apply it in an <a class="reference internal" href="#extends"><span>extension buildout
configuration file</span></a>:</p>
<div class="highlight-python"><div class="highlight"><pre>[buildout]
extends = base.cfg

[openerp]
revisions = 4320  ; main software
            addons-openerp 7109
</pre></div>
</div>
<p>As you can see in that example, the first token is the target
filesystem path, as in the <a class="reference internal" href="#addons"><span>addons</span></a> option, the second one is the
revision, except in the case of the main software (if VCS based), for
which there&#8217;s no filesystem path.</p>
<p>Some interesting use-cases:</p>
<ul class="simple">
<li>temporary fixing some revision in cas of upstream regression with no
impact on your main development configuration (no risk to commit an
unwanted freeze if the main configuration is itself versionned).</li>
<li>freezing satisfactory revisions in a release process (the recipe can
do that automatically for you, see <code class="docutils literal"><span class="pre">freeze-to</span></code> option below).</li>
</ul>
</div>
<div class="section" id="clean">
<span id="id7"></span><h3>clean<a class="headerlink" href="#clean" title="Permalink to this headline">¶</a></h3>
<p>If set to true, this option will clean remove python object files from
the main server part and addons before any update or install, and
perform relevant VCS idea of &#8220;clean, purge&#8221;.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>developers can lose their uncommitted work with this option.</p>
<p class="last">This option is not meant for developer setups, rather for
deployment and continuous integration. To avoid making a
dedicated buildout configuration for you CI bot, just add
it on the command-line.</p>
</div>
<p>Note that tarball downloads get re-extracted afresh in any case.</p>
</div>
<div class="section" id="vcs-revert">
<h3>vcs-revert<a class="headerlink" href="#vcs-revert" title="Permalink to this headline">¶</a></h3>
<p>Possible value: <code class="docutils literal"><span class="pre">on-merge</span></code> (more are been thought of)</p>
<p>If this option is used with the <code class="docutils literal"><span class="pre">on-merge</span></code> value, the VCS repositories
will be reverted, <strong>losing all local modifications</strong> after the
pull/update, right before the merge.</p>
<p>This is especially useful in unattended executions, to clean up any
previous failed merges.</p>
<p>Currently only bzr and git repositories get reverted.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">new in version 1.9.0</p>
</div>
</div>
<div class="section" id="vcs-clear-retry">
<h3>vcs-clear-retry<a class="headerlink" href="#vcs-clear-retry" title="Permalink to this headline">¶</a></h3>
<p>If <code class="docutils literal"><span class="pre">True</span></code> failed updates are cleared and retried once.
This is intended for brittle VCSes from CI robots.</p>
</div>
<div class="section" id="vcs-clear-locks">
<h3>vcs-clear-locks<a class="headerlink" href="#vcs-clear-locks" title="Permalink to this headline">¶</a></h3>
<p>Some VCS systems can leave locks after some failures and provide a separate
way to break them. If <code class="docutils literal"><span class="pre">True</span></code>,the repo will break any locks prior to
operations (mostly useful for automated agents, such as CI robots)</p>
</div>
<div class="section" id="id8">
<h3>git-depth<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>This is the global variant of the <a class="reference internal" href="#git-depth"><span>The depth Git option</span></a> option (please read
the provisions there carefully, as it is potentially dangerous).</p>
<p>Setting a value to <code class="docutils literal"><span class="pre">git-depth</span></code> is the same as doing it for all
involved Git repositories, but does not have precedence over
per-repository settings (which can also remove it altogether).</p>
<p>This option is especially meant for automated tools (continuous
integration, unattended deployment) as
they can easily add it from the command-line to any buildout.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">new in version 1.9.0</p>
</div>
</div>
</div>
<div class="section" id="odoo-options">
<span id="openerp-options"></span><h2>Odoo options<a class="headerlink" href="#odoo-options" title="Permalink to this headline">¶</a></h2>
<p>With the Odoo buildout recipes, Odoo options are managed
directly from the buildout file (usually
<code class="docutils literal"><span class="pre">buildout.cfg</span></code>) from the part.</p>
<p>The Odoo configuration files are generated by Odoo itself in the directory
specified by <code class="docutils literal"><span class="pre">etc-directory</span></code>, which defaults to the <cite>etc</cite> directory under your
buildout directory.</p>
<p>The settings of the Odoo configuration files are specified using a
dotted notation in which the fist segment is the name of the
corresponding section of the Odoo config file and the second is the
option name.</p>
<p>The specified options will just overwrite the existing
options in the corresponding config files. You don&#8217;t have to replicate all the
options in your section of the buildout file.  If a setting or a section does
not natively exist in the openerp config file, it can be created from there for
your application.</p>
<p>For example you can specify the xmlrpc port for the server or
even an additional option that does not exist in the default config file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">options</span><span class="o">.</span><span class="n">xmlrpc_port</span> <span class="o">=</span> <span class="mi">8069</span>
<span class="n">options</span><span class="o">.</span><span class="n">additional_option</span> <span class="o">=</span> <span class="s">&quot;foobar&quot;</span>
</pre></div>
</div>
<p>It will end-up in the server configuration as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">options</span><span class="p">]</span>
<span class="n">xmlrpc_port</span> <span class="o">=</span> <span class="mi">8069</span>
<span class="n">additional_option</span> <span class="o">=</span> <span class="s">&quot;foobar&quot;</span>
</pre></div>
</div>
<p>For the web client you can specify the port and company url with:</p>
<div class="highlight-python"><div class="highlight"><pre>global.server.socket_port = 8080
openerp-web.company.url = &#39;http://anybox.fr&#39;
</pre></div>
</div>
<p>It will modify the corresponding web client config:</p>
<div class="highlight-python"><div class="highlight"><pre>[global]
server.socket_port = 8080

[openerp-web]
company.url = &#39;http://anybox.fr&#39;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Buildout <a class="reference internal" href="#extends"><span>configuration inheritance</span></a> is
especially useful to manage the separation between a
reusable buildout configuration and local settings.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that for security reasons, the superadmin password is not set by
default. If you want databases to be manageable through the UI,
you may either explicitely set that password in the buildout part
configuration or even set it temporarily in the
<code class="docutils literal"><span class="pre">etc/openerp.conf</span></code> file.</p>
</div>
</div>
<div class="section" id="options-for-executables-generation-and-serving">
<h2>Options for executables generation and serving<a class="headerlink" href="#options-for-executables-generation-and-serving" title="Permalink to this headline">¶</a></h2>
<div class="section" id="script-name">
<span id="id9"></span><h3>script_name<a class="headerlink" href="#script-name" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">as of version 1.7.0, this option is deprecated because of its
redundancy with <a class="reference internal" href="#openerp-scripts"><span>openerp_scripts</span></a>.</p>
</div>
<p>Odoo startup scripts are created in the <cite>bin</cite> directory. By default
the name is <code class="docutils literal"><span class="pre">start_&lt;part_name&gt;</span></code>, so you can have several startup
scripts for each part if you configure several Odoo servers or clients.</p>
<p>You can pass additional typical
arguments to the server via the startup script, such as -i or -u options.</p>
<p>You can choose another name for the script by using the <em>script_name</em>
option</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">script_name</span> <span class="o">=</span> <span class="n">start_erp</span>
</pre></div>
</div>
</div>
<div class="section" id="gevent-script-name">
<h3>gevent_script_name<a class="headerlink" href="#gevent-script-name" title="Permalink to this headline">¶</a></h3>
<p>..note :: for Odoo version 8 and onwards</p>
<p>Lets you control the name of the asynchronous longpolling listener
leveraging <code class="docutils literal"><span class="pre">gevent</span></code> (known as <code class="docutils literal"><span class="pre">openerp-gevent</span></code> in the basic
install).</p>
<p>The default is <code class="docutils literal"><span class="pre">gevent_&lt;PART&gt;</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">new in version 1.8.4</p>
</div>
</div>
<div class="section" id="openerp-scripts">
<span id="id10"></span><h3>openerp_scripts<a class="headerlink" href="#openerp-scripts" title="Permalink to this headline">¶</a></h3>
<p>This option lets you install console scripts provided by any of the loaded eggs,
so that they can access to Odoo internals and load databases.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">new in version 1.7.0</p>
</div>
<p>Here we describe the format of the option only.
For explanation about what it means and how to use it, please refer to
<a class="reference internal" href="scripts.html"><em>Odoo Scripts</em></a>.</p>
<p>The option is multiline. Each line specifies exactly one
script, and must respect the following format:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">ENTRY_POINT_NAME[=WISHED_SCRIPT_NAME]</span> <span class="pre">[MODIFIER</span> <span class="pre">[MODIFIER</span> <span class="pre">[…]]]</span></code></div></blockquote>
<p>Each modifier takes the <code class="docutils literal"><span class="pre">MODIFIER_NAME=MODIFIER_VALUE</span></code> form.
No whitespace is allowed in modifiers, entry point, nor produced script names.</p>
<p>Here&#8217;s the list of currently available modifiers, with links inside <a class="reference internal" href="scripts.html"><em>the
dedicated chapter about Odoo scripts</em></a>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">command-line-options:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><a class="reference internal" href="scripts.html#command-line-options"><span>Command-line options</span></a></td>
</tr>
<tr class="field-even field"><th class="field-name">arguments:</th><td class="field-body"><a class="reference internal" href="scripts.html#arguments-session"><span>Arguments and session</span></a></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">openerp-log-level:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><a class="reference internal" href="scripts.html#openerp-log-level"><span>Odoo log level</span></a></td>
</tr>
</tbody>
</table>
<p>Full example:</p>
<div class="highlight-python"><div class="highlight"><pre>openerp_scripts = my_script arguments=session
                  my_other_script=actual-script-name arguments=3,session
                  nosetests=nosetests command-line-options=-d
                  sphinx-build=sphinx-build openerp-log-level=ERROR command-line-options=-d
</pre></div>
</div>
</div>
<div class="section" id="upgrade-script-name">
<span id="id11"></span><h3>upgrade_script_name<a class="headerlink" href="#upgrade-script-name" title="Permalink to this headline">¶</a></h3>
<p>This option lets you specify the wished name for the upgrade script.
The default value is <code class="docutils literal"><span class="pre">upgrade_&lt;part_name&gt;</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>new in version 1.8.0.</p>
<p class="last">We are actually not sure to keep that option, since it&#8217;s
redundant with <a class="reference internal" href="#openerp-scripts"><span>openerp_scripts</span></a>.</p>
</div>
</div>
<div class="section" id="upgrade-script">
<span id="id12"></span><h3>upgrade_script<a class="headerlink" href="#upgrade-script" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">new in version 1.8.0</p>
</div>
<p>This option lets you specify a source (<code class="docutils literal"><span class="pre">.py</span></code>) file and a callable
defined in that file to perform database upgrades. The default value
is:</p>
<div class="highlight-python"><div class="highlight"><pre>upgrade_script = upgrade.py run
</pre></div>
</div>
<p>If the specified source file doest not exist, the recipe will
initialize it with a simple and meaningful sample content, consistent
with the default value above.</p>
<p>If you want <em>not</em> to have an upgrade script, just override this option
with a blank value:</p>
<div class="highlight-python"><div class="highlight"><pre>upgrade_script =
</pre></div>
</div>
<p>See the full <a class="reference internal" href="scripts.html#upgrade-scripts"><span>Upgrade scripts</span></a> documentation to learn more
about upgrade scripts.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">new in version 1.8.0</p>
</div>
</div>
<div class="section" id="gunicorn">
<span id="id13"></span><h3>gunicorn<a class="headerlink" href="#gunicorn" title="Permalink to this headline">¶</a></h3>
<p>Gunicorn integration is only supported on Odoo ≥ 6.1.
Any value of this option makes the recipe generate a script to start
Odoo with Gunicorn and (<em>new in version 1.1</em>) a dedicated script to
handle cron jobs.</p>
<p>For OpenERP 6.1, the only accepted values are <code class="docutils literal"><span class="pre">direct</span></code> and
<code class="docutils literal"><span class="pre">proxied</span></code>. Any value is suitable for OpenERP ≥ 7</p>
<div class="section" id="proxied-mode">
<h4>Proxied mode<a class="headerlink" href="#proxied-mode" title="Permalink to this headline">¶</a></h4>
<p>For OpenERP 6.1, a special value of the <code class="docutils literal"><span class="pre">gunicorn</span></code> option is to be
used if you plan to run Gunicorn behind a reverse proxy:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">gunicorn</span> <span class="o">=</span> <span class="n">proxied</span>
</pre></div>
</div>
<p>This behaviour has been kept for OpenERP ≥ 7 to keep
backwards compatibility, but the option is now superseded by the
general <code class="docutils literal"><span class="pre">proxy_mode</span></code> option of the server. In the buildout context,
that&#8217;d be:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">options</span><span class="o">.</span><span class="n">proxy_mode</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
</div>
<div class="section" id="gunicorn-options">
<h4>Gunicorn options<a class="headerlink" href="#gunicorn-options" title="Permalink to this headline">¶</a></h4>
<p>Gunicorn-specific options are to be specified with the <code class="docutils literal"><span class="pre">gunicorn.</span></code>
prefix and will end up in the the Gunicorn python configuration file
<code class="docutils literal"><span class="pre">etc/gunicorn_&lt;part_name&gt;.conf.py</span></code>, such as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">gunicorn</span><span class="o">.</span><span class="n">workers</span> <span class="o">=</span> <span class="mi">8</span>
</pre></div>
</div>
<p>If you don&#8217;t specify <code class="docutils literal"><span class="pre">gunicorn.bind</span></code>, then a value is constructed
from the relevant options for the Odoo script (currently
<code class="docutils literal"><span class="pre">options.xmlrpc_port</span></code> and <code class="docutils literal"><span class="pre">options.xmlrpc_interface</span></code>).</p>
<p>Other simple supported options and their default values are (See also
the <a class="reference external" href="http://docs.gunicorn.org/en/latest/configure.html">Gunicorn configuration documentation</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">gunicorn</span><span class="o">.</span><span class="n">workers</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">gunicorn</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="mi">240</span>
<span class="n">gunicorn</span><span class="o">.</span><span class="n">max_requests</span> <span class="o">=</span> <span class="mi">2000</span>
</pre></div>
</div>
<p>The recipe sets the proper WSGI entry point according to Odoo
version, you may manually override that with an option:</p>
<div class="highlight-python"><div class="highlight"><pre>gunicorn.entry_point = mypackage:wsgi.app
</pre></div>
</div>
<p>You may specify the Gunicorn script name with the
<code class="docutils literal"><span class="pre">gunicorn_script_name</span></code> option. The configuration file will be named
accordingly.</p>
<p>The <code class="docutils literal"><span class="pre">gunicorn.preload_databases</span></code> option (one database per line) lets
you specify databases to load in a <a class="reference external" href="http://docs.gunicorn.org/en/latest/configure.html#post-fork">post_fork hook</a>.
With this setting, the worker processes will be ready for requests on these
databases right after their startup. Moreover, Gunicorn does not handle any
request to a worker until it is ready. Therefore, in workloads where
one or a few databases are actually used, this setting keeps the user
experience snappy even in the event of frequent worker restarts, and
allows for graceful restarts (use this for minor changes only).</p>
</div>
</div>
<div class="section" id="server-wide-modules">
<span id="id14"></span><h3>server_wide_modules<a class="headerlink" href="#server-wide-modules" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">new in version 1.9.0</p>
</div>
<p>This multi-line option lets you specify addons to be loaded directly
at startup, independently of what is installed in the database.</p>
<p>It plays the same role as the <code class="docutils literal"><span class="pre">--load</span></code> command-line option of the main Odoo
startup script, with lower precedence if the latter is also specified.
Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">server_wide_modules</span> <span class="o">=</span> <span class="n">custom_homepage</span>
</pre></div>
</div>
<p>Since there is no entry in the Odoo configuration file corresponding
to <code class="docutils literal"><span class="pre">--load</span></code>, this recipe option helps bringing uniformity accross
running instances of the project by enclosing this notion in
the shippable configuration.</p>
<p>It can also be leveraged by other scripts or recipe subsystems,
notably the <a class="reference internal" href="#gunicorn"><span>gunicorn startup script</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">in any case, the <code class="docutils literal"><span class="pre">web</span></code> addon is loaded as a server-wide one.</p>
</div>
</div>
<div class="section" id="openerp-command-name">
<span id="id15"></span><h3>openerp_command_name<a class="headerlink" href="#openerp-command-name" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">as of version 1.7.0, this option is deprecated because of
its redundancy with <a class="reference internal" href="#openerp-scripts"><span>openerp_scripts</span></a>.</p>
</div>
<p>Odoo Command Line Tools (openerp-command for short) is an
alternative set of command-line tools that may someday subsede the
current monolithic startup script. Currently experimental, but
already very useful in development mode.</p>
<p>It is currently enabled if the <a class="reference internal" href="#with-devtools"><span>with_devtools</span></a> option is on.</p>
<p>This works by requiring the <code class="docutils literal"><span class="pre">openerp-command</span></code> python
distribution, which is not on PyPI as of this writting, but comes
bundled with the current Odoo trunk (believed to be the future
Odoo 8).</p>
<p>As for other scripts, you can control its name of the produced script, e.g:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">openerp_command_name</span> <span class="o">=</span> <span class="n">oe</span>
</pre></div>
</div>
<p>the name defaults otherwise to <code class="docutils literal"><span class="pre">&lt;part_name&gt;_command</span></code>. Note that
<code class="docutils literal"><span class="pre">oe</span></code> is the classical name for this script outside of the realm of
this buildout recipe.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><code class="docutils literal"><span class="pre">openerp-command</span></code> has first been introduced as a separate
project while OpenERP 7.0 was in development stage. People
wanting to use it with OpenERP 7.0 can still grab it from
Launchpad with the <code class="docutils literal"><span class="pre">gp.vcsdevelop</span></code> extension:</p>
<div class="last highlight-python"><div class="highlight"><pre>[buildout]
extensions = gp.vcsdevelop
vcs-extend-develop = bzr+http://bazaar.launchpad.net/~openerp/openerp-command/7.0#egg=openerp-command
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">On OpenERP 7, do not use to launch production servers, especially in
an automatic way, <code class="docutils literal"><span class="pre">openerp-command</span></code> is really unstable and that
may damage your installation.</p>
</div>
</div>
<div class="section" id="scripts">
<h3>scripts<a class="headerlink" href="#scripts" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This option is useful for general purpose scripts
only. For scripts related to Odoo, see
<a class="reference internal" href="scripts.html"><em>Odoo Scripts</em></a>, and the <a class="reference internal" href="#openerp-scripts"><span>openerp_scripts</span></a> option.</p>
</div>
<p>This option controls the generation of console scripts declared by the
various involved Python distributions (either directly required with
the <a class="reference internal" href="#eggs"><span>eggs</span></a> option, or by dependency).</p>
<p>By default, no such script is generated, but you may specify some
according to your needs, with the same semantics as in <code class="docutils literal"><span class="pre">zc.recipe.egg</span></code>.</p>
<blockquote>
<div>scripts = change_tz</div></blockquote>
<p>In the current state, beware to <em>not</em> require the same script in different
parts or rename them. See
<a class="reference external" href="https://bugs.launchpad.net/anybox.recipe.openerp/+bug/1020967">https://bugs.launchpad.net/anybox.recipe.openerp/+bug/1020967</a> for
details.</p>
</div>
<div class="section" id="startup-delay">
<span id="id16"></span><h3>startup_delay<a class="headerlink" href="#startup-delay" title="Permalink to this headline">¶</a></h3>
<p>Specifies a delay in seconds to wait before actually launching Odoo. This
option was a preliminary hack to support both gunicorn instance and a legacy
instance.  The Gunicorn startup script (see below) itself is not affected by
this setting</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">startup_delay</span> <span class="o">=</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="options-for-development-qa-and-introspection">
<h2>Options for development, QA and introspection<a class="headerlink" href="#options-for-development-qa-and-introspection" title="Permalink to this headline">¶</a></h2>
<div class="section" id="with-devtools">
<span id="id17"></span><h3>with_devtools<a class="headerlink" href="#with-devtools" title="Permalink to this headline">¶</a></h3>
<p>Allows to load development and install useful devlopment and testing
tools, notably the following scripts:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">test_openerp</span></code>: a uniform test launcher for all supported
versions. See test_script_name option below for details.</li>
<li><code class="docutils literal"><span class="pre">openerp_command</span></code>: see openerp_command_name option below for
details. Not installed for Odoo major versions less than or equal to 6.1.</li>
</ul>
<p>This option is False by default, hence it&#8217;s activated this way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">with_devtools</span> <span class="o">=</span> <span class="n">true</span>
</pre></div>
</div>
<p>It will also add some dependencies that are typical to development
setups (tests related packages etc.) and automatically load where
needed helpers, such as <a class="reference external" href="http://pypi.python.org/pypi/anybox.testing.datetime">anybox.testing.datetime</a> (allows to
cheat with system time).</p>
</div>
<div class="section" id="test-script-name">
<span id="id18"></span><h3>test_script_name<a class="headerlink" href="#test-script-name" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">as of version 1.7.0, this option is deprecated because of its
redundancy with <a class="reference internal" href="#openerp-scripts"><span>openerp_scripts</span></a>.</p>
</div>
<p>If the <code class="docutils literal"><span class="pre">with_devtools</span></code> is set to True, the recipe will create a
test script, which is named by default <code class="docutils literal"><span class="pre">test_&lt;part_name&gt;</span></code>. You may
override the name in the configuration as in the following example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">test_script_name</span> <span class="o">=</span> <span class="n">test_erp</span>
</pre></div>
</div>
<p>The test script takes the same arguments as the regular startup
script:</p>
<div class="highlight-python"><div class="highlight"><pre>bin/test_openerp --help
bin/test_openerp -d test_db -i purchase,sale
</pre></div>
</div>
<p>At the time of this writing, all this script does compared to the
regular startup script is to bring uniformity across Odoo versions
by tweaking options internally.</p>
<p><em>As of version 1.8.2</em>, the <code class="docutils literal"><span class="pre">--install-all</span></code> additional option will be
expanded on-the-fly as <code class="docutils literal"><span class="pre">-i</span></code> on all available modules (don&#8217;t confuse
with <code class="docutils literal"><span class="pre">-i</span> <span class="pre">all</span></code>: the latter is equivalent to <code class="docutils literal"><span class="pre">-i</span> <span class="pre">base</span></code>).</p>
</div>
<div class="section" id="interpreter-name">
<span id="id19"></span><h3>interpreter_name<a class="headerlink" href="#interpreter-name" title="Permalink to this headline">¶</a></h3>
<p>The recipe will automatically create a python interpreter with a
<code class="docutils literal"><span class="pre">session</span></code> object that can bootstrap Odoo with a database right
away. You can use that for interactive sessions or to launch a script:</p>
<div class="highlight-python"><div class="highlight"><pre>$ bin/python_openerp
To start the Odoo working session, just do:
   session.open()
or
   session.open(db=DATABASE_NAME)
Then you can issue commands such as
   session.registry(&#39;res.users&#39;).browse(session.cr, 1, 1)

&gt;&gt;&gt;
</pre></div>
</div>
<p>The interpreter name is  <code class="docutils literal"><span class="pre">python_&lt;part_name&gt;</span></code> by default; but it can
be explicitely set like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">interpreter_name</span> <span class="o">=</span> <span class="n">my_py</span>
</pre></div>
</div>
<p>If you want <em>not</em> to have the interpreter, juste do</p>
<blockquote>
<div>interpreter_name =</div></blockquote>
<p>If you want to wrap a python script with such session objects you need to use
the <a class="reference internal" href="#openerp-scripts"><span>openerp_scripts</span></a> option. See <a class="reference internal" href="scripts.html"><em>Odoo Scripts</em></a> and especially
<a class="reference internal" href="scripts.html#arguments-session"><span>Arguments and session</span></a>.</p>
<p>If you want a more comfortable Python console like
<a class="reference external" href="http://ipython.org">IPython</a> or
<a class="reference external" href="http://bpython-interpreter.org">bPython</a>, take a
look at <a class="reference internal" href="scripts.html#interactive-consoles"><span>Interactive Consoles</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">this facility is new in version 1.6.0, and tested with
OpenERP ≥ 6.1 only for now.</p>
</div>
</div>
<div class="section" id="interpreter">
<h3>interpreter<a class="headerlink" href="#interpreter" title="Permalink to this headline">¶</a></h3>
<p>With the <code class="docutils literal"><span class="pre">gtkclient</span></code> and <code class="docutils literal"><span class="pre">webclient</span></code> recipes,
this behaves like the <cite>interpreter</cite> option of <cite>zc.recipe.egg</cite>: it
gives you a Python interpreter in the <code class="docutils literal"><span class="pre">bin</span></code> subdirectory of the buildout:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">interpreter</span> <span class="o">=</span> <span class="n">erp_python</span>
</pre></div>
</div>
<p>With the <code class="docutils literal"><span class="pre">server</span></code> recipe, the <code class="docutils literal"><span class="pre">interpreter</span></code> option will be ignored,
because this recipe always creates an interpreter with preloaded objects to
bootstrap openerp, and these depend on the configuration.
Check <a class="reference internal" href="#interpreter-name"><span>interpreter_name</span></a> for more details.</p>
</div>
</div>
<div class="section" id="options-for-download-and-caching-strategies">
<h2>Options for download and caching strategies<a class="headerlink" href="#options-for-download-and-caching-strategies" title="Permalink to this headline">¶</a></h2>
<p>Let us start by listing a few global buildout options (to be put in
the <code class="docutils literal"><span class="pre">[buildout]</span></code> section), whose scope is much larger than the
Odoo recipe.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">eggs-directory:</th><td class="field-body">control where eggs are stored after download and/or
build and reciprocally acts as a cache.</td>
</tr>
<tr class="field-even field"><th class="field-name">index:</th><td class="field-body">specifies where to get informations about distributions not found in
<code class="docutils literal"><span class="pre">eggs-directory</span></code>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">find-links:</th><td class="field-body">direct URLs to look for distributions</td>
</tr>
<tr class="field-even field"><th class="field-name">allow-hosts:</th><td class="field-body">white list of URL patterns allowed for distributions
download. Great to exclude the numerous useless sites
that setuptools may want to crawl and which tend to
break each time a new version gets referenced on PyPI.</td>
</tr>
</tbody>
</table>
<p>The Odoo recipes define a few more.</p>
<div class="section" id="base-url">
<span id="id20"></span><h3>base_url<a class="headerlink" href="#base-url" title="Permalink to this headline">¶</a></h3>
<p>This option is local to the <em>part</em>.</p>
<p>URL from which to download official and nightly versions
(assuming the archive filenames are constistent with those in
Odoo download server). This is a basic mirroring capability:</p>
<div class="highlight-python"><div class="highlight"><pre>base_url = http://download.example.com/openerp/
</pre></div>
</div>
</div>
<div class="section" id="openerp-downloads-directory">
<span id="id21"></span><h3>openerp-downloads-directory<a class="headerlink" href="#openerp-downloads-directory" title="Permalink to this headline">¶</a></h3>
<p>This is an option for the <code class="docutils literal"><span class="pre">[buildout]</span></code> section</p>
<p>Allows to share Odoo downloads among several buildouts. You should put this
option in your <code class="docutils literal"><span class="pre">~/.buildout/default.cfg</span></code> file.  It specifies the destination
download directory for Odoo archives. The path may be absolute or relative
to the buildout directory.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>[buildout]
openerp-downloads-directory = /home/user/.buildout/openerp-downloads
</pre></div>
</div>
</div>
</div>
<div class="section" id="options-for-release-and-packaging">
<h2>Options for release and packaging<a class="headerlink" href="#options-for-release-and-packaging" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">release and packaging should be provided by dedicated
executables, not by options. These options should disappear
at some point between 1.8 and 1.9 versions.</p>
</div>
<div class="section" id="freeze-to">
<span id="id22"></span><h3>freeze-to<a class="headerlink" href="#freeze-to" title="Permalink to this headline">¶</a></h3>
<p>This option is meant to produce an extension buildout configuration
that effectively freezes the variable versions and revisions of the
current configuration.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">supported VCSes for this feature are currently Mercurial,
Bazaar and Git (excluding Subversion).</p>
</div>
<p>It is meant for release processes, and as such includes some
consistency checks to avoid as much as possible issuing a frozen
configuration that could be different from what the developper or
release manager is assumed to have just tested. Namely:</p>
<ul class="simple">
<li>it works only in offline mode (command-line <code class="docutils literal"><span class="pre">-o</span></code> flag). This is to
avoid fetching new revisions from VCSes or PyPI</li>
<li>it fails if some VCS-controlled addons or main software have local
modifications, including pending merges.</li>
</ul>
<p>The recommended way to use it is through the command line (all
buildout options can be set this way). Here&#8217;s an example, assuming the
part is called <code class="docutils literal"><span class="pre">openerp-server-1</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre>bin/buildout -o openerp-server-1:freeze-to=frozen.cfg
</pre></div>
</div>
<p>This produces a buildout configuration file named <code class="docutils literal"><span class="pre">frozen.cfg</span></code>,
with notably an <code class="docutils literal"><span class="pre">openerp-server-1</span></code> part having a <a class="reference internal" href="#revisions"><span>revisions</span></a> option that
freezes everything.</p>
<p>For configurations with several openerp related parts, you can freeze
them together or in different files. This gives you flexibility in the
distributions you may want to produce from a single configuration file:</p>
<div class="highlight-python"><div class="highlight"><pre>bin/buildout -o openerp-server-1:freeze-to=server.cfg openerp-server-2:freeze-to=server.cfg gtkclient:freeze-to=client.cfg
</pre></div>
</div>
<p>In that latter example, <code class="docutils literal"><span class="pre">server.cfg</span></code> will have the two server parts,
while <code class="docutils literal"><span class="pre">client.cfg</span></code> will have the <code class="docutils literal"><span class="pre">gtkclient</span></code> part only.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>in DVCSes cases, nothing is done to check that the locally
extracted revisions are actually pushed where they should.</p>
<p class="last">Also, if the buildout configuration is itself under version
control (a good practice), it is not in the recipe scope to
commit or tag it.
You are encouraged to use an external release script for
that kind of purpose.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">the recipe will also freeze python distributions installed
with the <code class="docutils literal"><span class="pre">gp.vcsdevelop</span></code> extension but cannot currently
protect against local modifications of these.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">currently <code class="docutils literal"><span class="pre">freeze-to</span></code> cannot fix eggs versions related
to non-openerp parts.</p>
</div>
</div>
<div class="section" id="freeze-allow-picked-versions">
<span id="id23"></span><h3>freeze-allow-picked-versions<a class="headerlink" href="#freeze-allow-picked-versions" title="Permalink to this headline">¶</a></h3>
<p>This option is to be used in conjunction with <a class="reference internal" href="#freeze-to"><span>freeze-to</span></a>. If set to
<code class="docutils literal"><span class="pre">False</span></code>, it will add <code class="docutils literal"><span class="pre">allow-picked-versions</span> <span class="pre">=</span> <span class="pre">false</span></code>
for <code class="docutils literal"><span class="pre">zc.buildout</span></code> versions that support this flag.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">in the current state of things, this can cause problems
if you have non-openerp parts (see the various warnings
in <a class="reference internal" href="#freeze-to"><span>freeze-to</span></a>)</p>
</div>
</div>
<div class="section" id="extract-downloads-to">
<span id="id24"></span><h3>extract-downloads-to<a class="headerlink" href="#extract-downloads-to" title="Permalink to this headline">¶</a></h3>
<p>Following the same kind of logic as <a class="reference internal" href="#freeze-to"><span>freeze-to</span></a>, this option allows
to turn a buildout that aggregates from various remote sources
(tarball downloads, VCSes) into a self-contained buildout archive
directory that can be packed for easy distribution.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">supported VCSes for this feature are currently Mercurial,
Bazaar and Git (excluding Subversion).</p>
</div>
<p>Actually it extracts only the downloaded elements into a target
directory and issues a buildout configuration with local references
only. If that target directory has been itself initialized first with
the <em>fixed elements</em> (buildout configuration files, bootstrap scripts,
local addons), then it has all the needed elements, except eggs to
be downloaded from PyPI or the specified index site.</p>
<p>Here is an example, assuming the <em>fixed elements</em> are themselves versioned
with Mercurial:</p>
<div class="highlight-python"><div class="highlight"><pre>hg archive ../test-extract &amp;&amp; bin/buildout -o openerp:extract-downloads-to=../test-extract
</pre></div>
</div>
<p>The produced buildout configuration in the target directory is
<code class="docutils literal"><span class="pre">release.cfg</span></code>. So, for instance, from our <code class="docutils literal"><span class="pre">test-extract</span></code> archive,
the buildout can be executed like this:</p>
<div class="highlight-python"><div class="highlight"><pre>python bootstrap.py &amp;&amp; bin/buildout -c release.cfg
</pre></div>
</div>
<p>or further extended for system-dependent options such as port, db
connection, etc.</p>
<p>The <code class="docutils literal"><span class="pre">extract-downloads-to</span></code> option can be used for several parts
with the same target directory (same as <a class="reference internal" href="#freeze-to"><span>freeze-to</span></a>).</p>
<p>Furthermore, a default <code class="docutils literal"><span class="pre">freeze-to</span></code> is issued, producing a buildout
configuration called <code class="docutils literal"><span class="pre">extracted_from.cfg</span></code> in the target directory,
for later reference (local modification tracking) or a more
developper-friendly reproduction configuration (ready-made setup to
derive bugfix branches from).</p>
<p>This implication of <code class="docutils literal"><span class="pre">freeze-to</span></code> also has the side effect to enforce the
same rules with respect to uncommitted changes.</p>
<p>Python distributions managed with <code class="docutils literal"><span class="pre">gp.vcsdevelop</span></code> are taken into account.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2011-2015, &lt;a href=&#34;http://anybox.fr/&#34;&gt;Anybox SAS&lt;/a&gt; and contributors.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>